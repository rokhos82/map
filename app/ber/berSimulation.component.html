<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">Simulation Engine</div>
      <div class="panel-body">
        <div class="form-group">
          <label class="control-label" for="maxTurns">Max Turns</label>
          <input class="form-control" name="maxTurns" type="number" ng-model="$ctrl.ui.maxTurns" />
        </div>
        <div class="btn-group btn-group-justified">
          <a class="btn btn-default" ng-click="$ctrl.setup()">Setup</a>
          <a class="btn btn-default" ng-click="$ctrl.round()">One Round</a>
          <a class="btn btn-default" ng-click="$ctrl.run()">Fight</a>
        </div>
      </div>
    </div>
    <div class="panel panel-default">
      <div class="panel-heading">Units</div>
      <div class="panel-body">
        Fleet Name: {{$ctrl.lastState.attackers.name}} ({{$ctrl.lastState.attackers.race}})
      </div>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Unit</th>
            <th>Max BM</th>
            <th>Cur BM</th>
            <th>Max SH</th>
            <th>Cur SH</th>
            <th>Max TP</th>
            <th>Cur TP</th>
            <th>Max HL</th>
            <th>Cur HL</th>
            <th>Tags</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="attacker in $ctrl.lastState.attackers.units track by $index">
            <td>{{attacker.name}}</td>
            <td>{{attacker.bmMax}}</td>
            <td>{{attacker.bmCur}}</td>
            <td>{{attacker.shMax}}</td>
            <td>{{attacker.shCur}}</td>
            <td>{{attacker.tpMax}}</td>
            <td>{{attacker.tpCur}}</td>
            <td>{{attacker.hlMax}}</td>
            <td>{{attacker.hlCur}}</td>
          </tr>
        </tbody>
      </table>
      <div class="panel-body">
        Fleet Name:
      </div>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Unit</th>
            <th>Max BM</th>
            <th>Cur BM</th>
            <th>Max SH</th>
            <th>Cur SH</th>
            <th>Max TP</th>
            <th>Cur TP</th>
            <th>Max HL</th>
            <th>Cur HL</th>
            <th>Tags</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="defender in $ctrl.lastState.defenders.units track by $index">
            <td>{{defender.name}}</td>
            <td>{{defender.bmMax}}</td>
            <td>{{defender.bmCur}}</td>
            <td>{{defender.shMax}}</td>
            <td>{{defender.shCur}}</td>
            <td>{{defender.tpMax}}</td>
            <td>{{defender.tpCur}}</td>
            <td>{{defender.hlMax}}</td>
            <td>{{defender.hlCur}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="panel panel-default" ng-click="$ctrl.toggleView('output')">
      <div class="panel-heading">Output</div>
      <div class="panel-body" ng-repeat="turn in $ctrl.simulation.turns track by $index" ng-show="$ctrl.ui.output">
        <ul class="list-group">
          <li class="list-group-item" ng-repeat="event in turn.events track by $index">{{event.msg}}</li>
        </ul>
      </div>
    </div>
    <div class="panel panel-default" ng-click="$ctrl.toggleView('lastState')">
      <div class="panel-heading">Last State</div>
      <div class="panel-body" ng-show="$ctrl.ui.lastState">
        <pre>{{$ctrl.lastState}}</pre>
      </div>
    </div>
    <div class="panel panel-default" ng-click="$ctrl.toggleView('sim')">
      <div class="panel-heading">Simulation Object</div>
      <div class="panel-body" ng-show="$ctrl.ui.sim">
        <pre>{{$ctrl.simulation | json}}</pre>
      </div>
    </div>
    <div class="panel panel-default" ng-repeat="turn in $ctrl.simulation.turns track by $index" ng-click="$ctrl.toggleView('turns',$index)">
      <div class="panel-heading">Turn {{$index+1}} - Combat Log</div>
      <div class="panel-body" ng-show="$ctrl.ui.turns[{{$index}}]">
        <pre>{{turn.events | json}}</pre>
      </div>
    </div>
  </div>
</div>
